(function ($) {
    $.fn.createPPT = function (options) {
        var config = { slide: '.slide' }; $(this).each(function () {
            var $ppt = $(this); $ppt.count = 1; $ppt.changeSlide = function (newSlide) {
                $ppt.visibleSlide = $ppt.slides.filter(':visible'); $ppt.slideToShow = $ppt.slides.filter(':nth-child(' + newSlide + ')')
                $ppt.visibleSlide.fadeOut(500); $ppt.slideToShow.fadeIn(500)
            }; $ppt.prevNextClick = function (action) {
                if (action === 'prev') { $ppt.count === 1 ? $ppt.count = $ppt.slides.length : $ppt.count--; } else { $ppt.count === $ppt.slides.length ? $ppt.count = 1 : $ppt.count++; }
                $ppt.changeSlide($ppt.count); window.location.hash = '#' + $ppt.count;
            }; $ppt.addControls = function () {
                $ppt.numSlides = $ppt.slides.length; $(document).keyup(function (e) {
                    var action = ''; if (e.keyCode === 37) { action = 'prev'; } else if (e.keyCode === 39) { action = 'next'; }
                    if (action !== '') { $ppt.prevNextClick(action); } 
                });
            }; $ppt.init = function () {
                $ppt.options = $.extend(config, options); $ppt.slides = $ppt.find($ppt.options.slide); $ppt.currentHash = window.location.hash.substr(1); if ($ppt.currentHash) { $ppt.slides.filter(':not(:nth-child(' + $ppt.currentHash + '))').hide(); } else { $ppt.slides.filter(':not(:first)').hide(); }
                $ppt.addControls();
            }; $ppt.init();
        });
    };
})(jQuery);